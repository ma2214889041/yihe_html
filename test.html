<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2487.6">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; color: #4689cc; -webkit-text-stroke: #4689cc}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; color: #8cd3fe; -webkit-text-stroke: #8cd3fe}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; color: #adadad; -webkit-text-stroke: #adadad}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; color: #c27e65; -webkit-text-stroke: #c27e65}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; color: #cdad6a; -webkit-text-stroke: #cdad6a}
    p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; color: #cacaca; -webkit-text-stroke: #cacaca}
    p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; color: #a7c598; -webkit-text-stroke: #a7c598}
    p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; color: #adadad; -webkit-text-stroke: #adadad; min-height: 14.0px}
    p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; color: #598a43; -webkit-text-stroke: #598a43}
    p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; color: #d4d69a; -webkit-text-stroke: #d4d69a}
    span.s1 {font-kerning: none; color: #6d6d6d; background-color: #171717; -webkit-text-stroke: 0px #6d6d6d}
    span.s2 {font-kerning: none; background-color: #171717}
    span.s3 {font-kerning: none; color: #adadad; background-color: #171717; -webkit-text-stroke: 0px #adadad}
    span.s4 {font-kerning: none; color: #8cd3fe; background-color: #171717; -webkit-text-stroke: 0px #8cd3fe}
    span.s5 {font-kerning: none; color: #4689cc; background-color: #171717; -webkit-text-stroke: 0px #4689cc}
    span.s6 {font-kerning: none; color: #c27e65; background-color: #171717; -webkit-text-stroke: 0px #c27e65}
    span.s7 {font-kerning: none; color: #cacaca; background-color: #171717; -webkit-text-stroke: 0px #cacaca}
    span.s8 {font-kerning: none; color: #a7c598; background-color: #171717; -webkit-text-stroke: 0px #a7c598}
    span.s9 {font-kerning: none; color: #d4d69a; background-color: #171717; -webkit-text-stroke: 0px #d4d69a}
    span.s10 {font-kerning: none}
    span.s11 {font-kerning: none; color: #598a43; background-color: #171717; -webkit-text-stroke: 0px #598a43}
  </style>
</head>
<body>
<p class="p1"><span class="s1">&lt;!</span><span class="s2">DOCTYPE</span><span class="s3"> </span><span class="s4">html</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1">&lt;</span><span class="s2">html</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1">&lt;</span><span class="s2">head</span><span class="s1">&gt;</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">  </span></span><span class="s1">&lt;</span><span class="s5">meta</span><span class="s3"> </span><span class="s2">charset</span><span class="s3">=</span><span class="s6">"utf-8"</span><span class="s1">&gt;</span></p>
<p class="p3"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">&lt;</span><span class="s5">title</span><span class="s1">&gt;</span><span class="s2">高德地图定位示例</span><span class="s1">&lt;/</span><span class="s5">title</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s3"><span class="Apple-converted-space">  </span></span><span class="s1">&lt;</span><span class="s5">script</span><span class="s7"> </span><span class="s4">src</span><span class="s7">=</span><span class="s2">"https://webapi.amap.com/maps?v=1.4.15&amp;key=36ad54204561f8044ed21fb739f5abe4"</span><span class="s1">&gt;&lt;/</span><span class="s5">script</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s3"><span class="Apple-converted-space">  </span></span><span class="s1">&lt;</span><span class="s2">style</span><span class="s1">&gt;</span></p>
<p class="p5"><span class="s7"><span class="Apple-converted-space">    </span></span><span class="s2">#container</span><span class="s7"> {</span></p>
<p class="p6"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s4">width</span><span class="s2">: </span><span class="s8">100%</span><span class="s2">;</span></p>
<p class="p6"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s4">height</span><span class="s2">: </span><span class="s8">100vh</span><span class="s2">;</span></p>
<p class="p6"><span class="s2"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p1"><span class="s7"><span class="Apple-converted-space">  </span></span><span class="s1">&lt;/</span><span class="s2">style</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1">&lt;/</span><span class="s2">head</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1">&lt;</span><span class="s2">body</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s3"><span class="Apple-converted-space">  </span></span><span class="s1">&lt;</span><span class="s5">div</span><span class="s3"> </span><span class="s4">id</span><span class="s3">=</span><span class="s2">"container"</span><span class="s1">&gt;&lt;/</span><span class="s5">div</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s3"><span class="Apple-converted-space">  </span></span><span class="s1">&lt;</span><span class="s2">script</span><span class="s1">&gt;</span></p>
<p class="p6"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s5">var</span><span class="s2"> </span><span class="s4">map</span><span class="s2"> = </span><span class="s5">new</span><span class="s2"> </span><span class="s4">AMap</span><span class="s2">.</span><span class="s9">Map</span><span class="s2">(</span><span class="s6">'container'</span><span class="s2">, {</span></p>
<p class="p2"><span class="s7"><span class="Apple-converted-space">      </span></span><span class="s2">resizeEnable:</span><span class="s7"> </span><span class="s5">true</span><span class="s7">,</span></p>
<p class="p7"><span class="s7"><span class="Apple-converted-space">      </span></span><span class="s4">center:</span><span class="s7"> [</span><span class="s2">116.397428</span><span class="s7">, </span><span class="s2">39.90923</span><span class="s7">],</span></p>
<p class="p6"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s4">zoom:</span><span class="s2"> </span><span class="s8">13</span></p>
<p class="p6"><span class="s2"><span class="Apple-converted-space">    </span>});</span></p>
<p class="p8"><span class="s10"></span><br></p>
<p class="p9"><span class="s7"><span class="Apple-converted-space">    </span></span><span class="s2">// 使用浏览器定位</span></p>
<p class="p4"><span class="s7"><span class="Apple-converted-space">    </span></span><span class="s4">map</span><span class="s7">.</span><span class="s9">plugin</span><span class="s7">(</span><span class="s2">'AMap.Geolocation'</span><span class="s7">, </span><span class="s5">function</span><span class="s7">() {</span></p>
<p class="p2"><span class="s7"><span class="Apple-converted-space">      </span></span><span class="s5">var</span><span class="s7"> </span><span class="s2">geolocation</span><span class="s7"> = </span><span class="s5">new</span><span class="s7"> </span><span class="s2">AMap</span><span class="s7">.</span><span class="s9">Geolocation</span><span class="s7">({</span></p>
<p class="p2"><span class="s7"><span class="Apple-converted-space">        </span></span><span class="s2">enableHighAccuracy:</span><span class="s7"> </span><span class="s5">true</span><span class="s7">,</span></p>
<p class="p6"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s4">timeout:</span><span class="s2"> </span><span class="s8">10000</span><span class="s2">,</span></p>
<p class="p2"><span class="s7"><span class="Apple-converted-space">        </span></span><span class="s2">maximumAge:</span><span class="s7"> </span><span class="s8">0</span><span class="s7">,</span></p>
<p class="p6"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s4">convert:</span><span class="s2"> </span><span class="s5">true</span><span class="s2">,</span></p>
<p class="p2"><span class="s7"><span class="Apple-converted-space">        </span></span><span class="s2">showButton:</span><span class="s7"> </span><span class="s5">true</span><span class="s7">,</span></p>
<p class="p2"><span class="s7"><span class="Apple-converted-space">        </span></span><span class="s2">buttonPosition:</span><span class="s7"> </span><span class="s6">'RB'</span><span class="s7">,</span></p>
<p class="p2"><span class="s7"><span class="Apple-converted-space">        </span></span><span class="s2">buttonOffset:</span><span class="s7"> </span><span class="s5">new</span><span class="s7"> </span><span class="s2">AMap</span><span class="s7">.</span><span class="s9">Pixel</span><span class="s7">(</span><span class="s8">10</span><span class="s7">, </span><span class="s8">20</span><span class="s7">),</span></p>
<p class="p2"><span class="s7"><span class="Apple-converted-space">        </span></span><span class="s2">showMarker:</span><span class="s7"> </span><span class="s5">true</span><span class="s7">,</span></p>
<p class="p2"><span class="s7"><span class="Apple-converted-space">        </span></span><span class="s2">showCircle:</span><span class="s7"> </span><span class="s5">true</span><span class="s7">,</span></p>
<p class="p2"><span class="s7"><span class="Apple-converted-space">        </span></span><span class="s2">panToLocation:</span><span class="s7"> </span><span class="s5">true</span><span class="s7">,</span></p>
<p class="p2"><span class="s7"><span class="Apple-converted-space">        </span></span><span class="s2">zoomToAccuracy:</span><span class="s7"> </span><span class="s5">true</span></p>
<p class="p6"><span class="s2"><span class="Apple-converted-space">      </span>});</span></p>
<p class="p2"><span class="s7"><span class="Apple-converted-space">      </span></span><span class="s2">map</span><span class="s7">.</span><span class="s9">addControl</span><span class="s7">(</span><span class="s2">geolocation</span><span class="s7">);</span></p>
<p class="p10"><span class="s7"><span class="Apple-converted-space">      </span></span><span class="s4">geolocation</span><span class="s7">.</span><span class="s2">getCurrentPosition</span><span class="s7">();</span></p>
<p class="p10"><span class="s7"><span class="Apple-converted-space">      </span></span><span class="s4">AMap</span><span class="s7">.</span><span class="s4">event</span><span class="s7">.</span><span class="s2">addListener</span><span class="s7">(</span><span class="s4">geolocation</span><span class="s7">, </span><span class="s6">'complete'</span><span class="s7">, </span><span class="s2">onComplete</span><span class="s7">); </span><span class="s11">// 返回定位信息</span></p>
<p class="p2"><span class="s7"><span class="Apple-converted-space">      </span></span><span class="s2">AMap</span><span class="s7">.</span><span class="s2">event</span><span class="s7">.</span><span class="s9">addListener</span><span class="s7">(</span><span class="s2">geolocation</span><span class="s7">, </span><span class="s6">'error'</span><span class="s7">, </span><span class="s9">onError</span><span class="s7">); </span><span class="s11">// 返回定位出错信息</span></p>
<p class="p6"><span class="s2"><span class="Apple-converted-space">    </span>});</span></p>
<p class="p8"><span class="s10"></span><br></p>
<p class="p9"><span class="s7"><span class="Apple-converted-space">    </span></span><span class="s2">// 定位成功信息处理</span></p>
<p class="p10"><span class="s7"><span class="Apple-converted-space">    </span></span><span class="s5">function</span><span class="s7"> </span><span class="s2">onComplete</span><span class="s7">(</span><span class="s4">data</span><span class="s7">) {</span></p>
<p class="p2"><span class="s7"><span class="Apple-converted-space">      </span></span><span class="s2">window</span><span class="s7">.</span><span class="s2">parent</span><span class="s7">.</span><span class="s9">postMessage</span><span class="s7">({</span></p>
<p class="p4"><span class="s7"><span class="Apple-converted-space">        </span></span><span class="s4">type:</span><span class="s7"> </span><span class="s2">'location'</span><span class="s7">,</span></p>
<p class="p2"><span class="s7"><span class="Apple-converted-space">        </span></span><span class="s2">longitude:</span><span class="s7"> </span><span class="s2">data</span><span class="s7">.</span><span class="s2">position</span><span class="s7">.</span><span class="s9">getLng</span><span class="s7">(),</span></p>
<p class="p2"><span class="s7"><span class="Apple-converted-space">        </span></span><span class="s2">latitude:</span><span class="s7"> </span><span class="s2">data</span><span class="s7">.</span><span class="s2">position</span><span class="s7">.</span><span class="s9">getLat</span><span class="s7">()</span></p>
<p class="p6"><span class="s2"><span class="Apple-converted-space">      </span>}, </span><span class="s6">'*'</span><span class="s2">);</span></p>
<p class="p6"><span class="s2"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p8"><span class="s10"></span><br></p>
<p class="p9"><span class="s7"><span class="Apple-converted-space">    </span></span><span class="s2">// 定位失败信息处理</span></p>
<p class="p6"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s5">function</span><span class="s2"> </span><span class="s9">onError</span><span class="s2">(</span><span class="s4">error</span><span class="s2">) {</span></p>
<p class="p2"><span class="s7"><span class="Apple-converted-space">      </span></span><span class="s2">window</span><span class="s7">.</span><span class="s2">parent</span><span class="s7">.</span><span class="s9">postMessage</span><span class="s7">({</span></p>
<p class="p6"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s4">type:</span><span class="s2"> </span><span class="s6">'error'</span><span class="s2">,</span></p>
<p class="p6"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s4">message:</span><span class="s2"> </span><span class="s6">'定位失败'</span></p>
<p class="p6"><span class="s2"><span class="Apple-converted-space">      </span>}, </span><span class="s6">'*'</span><span class="s2">);</span></p>
<p class="p6"><span class="s2"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p1"><span class="s7"><span class="Apple-converted-space">  </span></span><span class="s1">&lt;/</span><span class="s2">script</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1">&lt;/</span><span class="s2">body</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1">&lt;/</span><span class="s2">html</span><span class="s1">&gt;</span></p>
</body>
</html>
